<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Construction Pricing</title>
    <link rel="stylesheet" href="css/red_test.css" />
</head>
<body>
    <main>
        <h1>Materials for Sale</h1>

        <table width="100%">
            <thead>
                <tr>
                    <th><input id="checkAll" type="checkbox" onclick="checkAll()" /></th>
                    <th>Material</th>
                    <th>Price</th>
                    <th>In Stock</th>
                </tr>
            </thead>
            <tbody id="inventory">
                <tr>
                    <td class="checkbox_column"><input type="checkbox" onclick="updateMainCheckbox(this)"/></td>
                    <td>Wood</td>
                    <td>$15</td>
                    <td id="woodStock" class="stock true">Yes</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td></td>
                    <td>
                        <input type="text" name="material" id="material" />
                    </td>
                    <td>
                        <input type="text" name="price" id="price" />
                    </td>
                    <td>
                        <button onclick="addNewStock()">Add New</button>
                    </td>
                </tr>
            </tfoot>
        </table>

        <button onclick="addStock()">Add Stock</button>
        <button onclick="removeStock()">Remove Stock</button>

    </main>

    <script>

        var inventory = document.getElementById('inventory');
        var woodstock, material, price;

        function updateMainCheckbox(checkbox) {
            if (!checkbox.checked) {
                document.getElementById('checkAll').checked = false;
            }
        }

        function checkAll() {
            var inputs = inventory.getElementsByTagName('input');
            for (var i=0; i < inputs.length; i++) {
                if (inputs[i].type == 'checkbox') {
                    inputs[i].checked = true;
                }
            }
        }

        function removeStock() {
            var rows = inventory.getElementsByTagName('tr');
            for (var i=0; i < rows.length; i++) {
                var input = rows[i].getElementsByTagName('input');
                if (input[0].type == 'checkbox') {
                    if (input[0].checked) {
                        rows[i].lastElementChild.className = "false";
                        rows[i].lastElementChild.textContent = "No";
                    }
                }
            }
        };

        function addStock() {
            var rows = inventory.getElementsByTagName('tr');
            for (var i=0; i < rows.length; i++) {
                var input = rows[i].getElementsByTagName('input');
                if (input[0].type == 'checkbox') {
                    if (input[0].checked) {
                        rows[i].lastElementChild.className = "true";
                        rows[i].lastElementChild.textContent = "Yes";
                    }
                }
            }
        };

        function addNewStock() {
            material = document.getElementById('material').value;
            price = document.getElementById('price').value;

            if (material === '' || price === '' || isNaN(price)) {
                return
            }

            var newRow = "<tr>";
            newRow += '<td><input type="checkbox" onclick="updateMainCheckbox(this)"/></td>';
            newRow += '<td>' + material + '</td>';
            newRow += '<td>$' + price + '</td>';
            newRow += '<td class="false">No</td>';
            newRow += '</tr>';

            inventory.innerHTML += newRow;

            document.getElementById('material').value = '';
            document.getElementById('price').value = '';
        };

    </script>
</body>
</html>
























